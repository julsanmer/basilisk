

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>makeDraftModule &mdash; Basilisk 2.2.1b0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #CFB87C" >
          

          
            <a href="../index.html" class="icon icon-home"> Basilisk
          

          
            
            <img src="../_static/Basilisk-Logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                version 2.2.1b0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Basilisk:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Learn.html">Learning Basilisk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Documentation/index.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Forum.html">News and Discussions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vizard:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/Vizard.html">About Vizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardDownload.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardReleaseNotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/VizardGUI.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardAdvanced/index.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vizard/vizardGallery.html">Video Gallery</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Basilisk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>makeDraftModule</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for makeDraftModule</h1><div class="highlight"><pre>
<span></span><span class="c1"># ISC License</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 2021, Autonomous Vehicle Systems Lab, University of Colorado at Boulder</span>
<span class="c1">#</span>
<span class="c1"># Permission to use, copy, modify, and/or distribute this software for any</span>
<span class="c1"># purpose with or without fee is hereby granted, provided that the above</span>
<span class="c1"># copyright notice and this permission notice appear in all copies.</span>
<span class="c1">#</span>
<span class="c1"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span>
<span class="c1"># WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="c1"># MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span>
<span class="c1"># ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="c1"># WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span>
<span class="c1"># ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span>
<span class="c1"># OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This script is used to create a Basilisk module folder given the basic I/O and naming information.</span>

<span class="sd">- Modify either ``fillCppInfo()`` or ``fillCInfo()`` to contain the desired information for the new BSK module.</span>
<span class="sd">- edit the ``__main__`` routine at the end of the file to call the desired module type with</span>
<span class="sd">  ``createCppModule()`` or ``createCModule``.</span>
<span class="sd">- run the script from the command line using ``python3 makeDraftModule.py``</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># assumes this script is in .../basilisk/src/utilities</span>
<span class="n">pathToSrc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<span class="n">initialCwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="n">statusColor</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[92m&#39;</span>
<span class="n">failColor</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[91m&#39;</span>
<span class="n">warningColor</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[93m&#39;</span>
<span class="n">endColor</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m&#39;</span>

<div class="viewcode-block" id="moduleGenerator"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator">[docs]</a><span class="k">class</span> <span class="nc">moduleGenerator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    class to generate draft Basilisk modules</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># the following variables must be set for this module generator to function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modulePathRelSrc</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># path to the new module folder relative to basilisk/src</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># lower camel case name of the module</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">briefDescription</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># brief module description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copyrightHolder</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># holder of open source copyright</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inMsgList</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of input message dictionary list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outMsgList</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of input message dictionary list</span>

        <span class="c1"># module behavior flags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cleanBuild</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># flag if any prior directories should be deleted automatically</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># flag if the status messages should be printed</span>

        <span class="c1"># private class variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># absolute path to the folder which will contain the module folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_newModuleLocation</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># absolute path to the auto-generated Basilisk module folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># BSK open-source license statement</span>

    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;end&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">endString</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">endString</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>

<div class="viewcode-block" id="moduleGenerator.checkPathToNewFolderLocation"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator.checkPathToNewFolderLocation">[docs]</a>    <span class="k">def</span> <span class="nf">checkPathToNewFolderLocation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make sure the supplied module destination path is correct</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Checking Module location:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">failColor</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ERROR: &quot;</span> <span class="o">+</span> <span class="n">endColor</span> <span class="o">+</span> <span class="s2">&quot;Incorrect path to the new folder:&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span><span class="p">)</span>
            <span class="n">exit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span><span class="p">)</span></div>

<div class="viewcode-block" id="moduleGenerator.createNewModuleFolder"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator.createNewModuleFolder">[docs]</a>    <span class="k">def</span> <span class="nf">createNewModuleFolder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the new module folder</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Module Folder:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_newModuleLocation</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">warningColor</span> <span class="o">+</span> <span class="s2">&quot;WARNING: &quot;</span> <span class="o">+</span> <span class="n">endColor</span> <span class="o">+</span> <span class="s2">&quot;The new module destination already exists.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleanBuild</span><span class="p">:</span>
                <span class="n">ans</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Do you want to delete this folder and recreate? (y or n): &quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ans</span> <span class="o">!=</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">failColor</span> <span class="o">+</span> <span class="s2">&quot;Aborting module creation.&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">)</span>
                    <span class="n">exit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Cleared the old folder.&quot;</span><span class="p">)</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_newModuleLocation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_newModuleLocation</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_newModuleLocation</span><span class="p">)</span></div>

<div class="viewcode-block" id="moduleGenerator.readLicense"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator.readLicense">[docs]</a>    <span class="k">def</span> <span class="nf">readLicense</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read the Basilisk license file&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Importing License:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pathToSrc</span> <span class="o">+</span> <span class="s2">&quot;/../LICENSE&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;Autonomous Vehicle Systems Lab, University of Colorado at Boulder&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">copyrightHolder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="moduleGenerator.createRstFile"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator.createRstFile">[docs]</a>    <span class="k">def</span> <span class="nf">createRstFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the Module RST documentation draft.&quot;&quot;&quot;</span>
        <span class="n">rstFileName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s2">&quot;.rst&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating RST Documentation File &quot;</span> <span class="o">+</span> <span class="n">rstFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">rstFile</span> <span class="o">=</span> <span class="s1">&#39;Executive Summary</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;-----------------</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">briefDescription</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;Message Connection Descriptions</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;-------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;The following table lists all the module input and output messages.  </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;The module msg connection is set by the user from python.  </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;The msg type contains a link to the message structure definition, while the description </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;provides information on what this message is used for.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;.. list-table:: Module I/O Messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;    :widths: 25 25 50</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;    :header-rows: 1</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;    * - Msg Variable Name</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;      - Msg Type</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;      - Description</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inMsgList</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;    * - &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;      - :ref:`&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload`</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;      - &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">rstFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">rstFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rstFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="moduleGenerator.createTestFile"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator.createTestFile">[docs]</a>    <span class="k">def</span> <span class="nf">createTestFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Create a functioning python unit test file that loads the new module, creates and connect blank</span>
<span class="sd">            input messages, and sets up recorder modules for each output message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s1">&#39;_UnitTest&#39;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;_UnitTest&#39;</span><span class="p">)</span>
        <span class="n">testFileName</span> <span class="o">=</span> <span class="s2">&quot;test_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s2">&quot;.py&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Python Init Test File &quot;</span> <span class="o">+</span> <span class="n">testFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">testFile</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;# &#39;</span> <span class="o">+</span> <span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;import pytest</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;from Basilisk.utilities import SimulationBaseClass</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;from Basilisk.utilities import unitTestSupport</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;from Basilisk.architecture import messaging</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;from Basilisk.utilities import macros</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;from Basilisk.&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modulePathRelSrc</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; import &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;@pytest.mark.parametrize(&quot;accuracy&quot;, [1e-12])</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;@pytest.mark.parametrize(&quot;param1, param2&quot;, [</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;     (1, 1)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    ,(1, 3)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;])</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;def test_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;(show_plots, param1, param2, accuracy):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    r&quot;&quot;&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    **Validation Test Description**</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    Compose a general description of what is being tested in this unit test script.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    **Test Parameters**</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    Discuss the test parameters used.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    Args:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;        param1 (int): Dummy test parameter for this parameterized unit test</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;        param2 (int): Dummy test parameter for this parameterized unit test</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;        accuracy (float): absolute accuracy value used in the validation tests</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    **Description of Variables Being Tested**</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    Here discuss what variables and states are being checked. </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    &quot;&quot;&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    [testResults, testMessage] = &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;TestFunction(show_plots, param1, param2, accuracy)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    assert testResults &lt; 1, testMessage</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;def &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;TestFunction(show_plots, param1, param2, accuracy):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    &quot;&quot;&quot;Test method&quot;&quot;&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    testFailCount = 0</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    testMessages = []</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitTaskName = &quot;unitTask&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitProcessName = &quot;TestProcess&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitTestSim = SimulationBaseClass.SimBaseClass()</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    testProcessRate = macros.sec2nano(0.5)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    testProc = unitTestSim.CreateNewProcess(unitProcessName)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    testProc.addTask(unitTestSim.CreateNewTask(unitTaskName, testProcessRate))</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    # setup module to be tested</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;C++&quot;</span><span class="p">:</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    module = &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;()</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    module = &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;()</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">failColor</span> <span class="o">+</span> <span class="s2">&quot;ERROR: &quot;</span> <span class="o">+</span> <span class="n">endColor</span> <span class="o">+</span> <span class="s2">&quot;Wrong module type provided to test file method.&quot;</span><span class="p">)</span>
            <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    module.ModelTag = &quot;&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;Tag&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitTestSim.AddModelToTask(unitTaskName, module)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    # Configure blank module input messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Data = messaging.&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload()</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; = messaging.&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;().write(&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Data)&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    # subscribe input messages to module</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    module.&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.subscribeTo(&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    # setup output message recorder objects</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Rec = module.&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.recorder()</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitTestSim.AddModelToTask(unitTaskName, &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Rec)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitTestSim.InitializeSimulation()</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitTestSim.ConfigureStopTime(macros.sec2nano(1.0))</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    unitTestSim.ExecuteSimulation()</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    # pull module data and make sure it is correct</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    if testFailCount == 0:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;        print(&quot;PASSED: &quot; + module.ModelTag)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    else:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;        print(testMessages)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    return [testFailCount, &quot;&quot;.join(testMessages)]</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;if __name__ == &quot;__main__&quot;:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;    test_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">+</span> <span class="s1">&#39;(False, 1, 1, 1e-12)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">testFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">testFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">testFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="moduleGenerator.createCppModule"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator.createCppModule">[docs]</a>    <span class="k">def</span> <span class="nf">createCppModule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a C++ Basilisk module</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">modulePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modulePathRelSrc</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span>
        <span class="n">briefDescription</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">briefDescription</span>
        <span class="n">inMsgList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inMsgList</span>
        <span class="n">outMsgList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outMsgList</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Creating C++ Module: &#39;</span> <span class="o">+</span> <span class="n">endColor</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;([a-zA-Z])&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">groups</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># read in the license information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">readLicense</span><span class="p">()</span>
        <span class="n">licenseC</span> <span class="o">=</span> <span class="s2">&quot;/*&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span> <span class="o">+</span> <span class="s2">&quot;*/</span><span class="se">\n\n</span><span class="s2">&quot;</span>

        <span class="c1"># make sure the path, specified relative to basilisk/src, to the new module location is correct</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathToSrc</span><span class="p">,</span> <span class="n">modulePath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkPathToNewFolderLocation</span><span class="p">()</span>

        <span class="c1"># create new Module folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_newModuleLocation</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createNewModuleFolder</span><span class="p">()</span>

        <span class="c1">#</span>
        <span class="c1"># make module header file</span>
        <span class="c1">#</span>
        <span class="n">headerFileName</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Header File &quot;</span> <span class="o">+</span> <span class="n">headerFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">headerFile</span> <span class="o">=</span> <span class="n">licenseC</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#ifndef &#39;</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;_H</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#define &#39;</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;_H</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;architecture/_GeneralModuleFiles/sys_model.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1"># loop over message definition includes</span>
        <span class="n">includedMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span> <span class="o">+</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="c1"># ensure we don&#39;t include message definition files multiple times</span>
            <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">includedMsgs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
                    <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;architecture/msgPayloadDefC/&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C++&#39;</span><span class="p">:</span>
                    <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;architecture/msgPayloadDefCpp/&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">includedMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;architecture/utilities/bskLogging.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;architecture/messaging/messaging.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! @brief &#39;</span> <span class="o">+</span> <span class="n">briefDescription</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> */</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;class &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;: public SysModel {</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;public:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;();</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    ~&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;();</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    void Reset(uint64_t CurrentSimNanos);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    void UpdateState(uint64_t CurrentSimNanos);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;public:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    ReadFunctor&lt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload&gt; &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> \
                          <span class="o">+</span> <span class="s1">&#39;;  //!&lt; &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    Message&lt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload&gt; &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> \
                          <span class="o">+</span> <span class="s1">&#39;;  //!&lt; &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    BSKLogger bskLogger;              //!&lt; -- BSK Logging</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;};</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">#endif</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">headerFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">headerFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># make module definition file</span>
        <span class="c1">#</span>
        <span class="n">defFileName</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.cpp&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Definition File &quot;</span> <span class="o">+</span> <span class="n">defFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">defFile</span> <span class="o">=</span> <span class="n">licenseC</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;&#39;</span> <span class="o">+</span> <span class="n">modulePath</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &lt;iostream&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &lt;cstring&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! This is the constructor for the module class.  It sets default variable</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    values and initializes the various parts of the model */</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;::&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;()</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! Module Destructor */</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;::~&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;()</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! This method is used to reset the module and checks that required input messages are connect.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    @return void</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;void &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;::Reset(uint64_t CurrentSimNanos)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // check that required input messages are connected</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    if (!this-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.isLinked()) {</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;        bskLogger.bskLog(BSK_ERROR, &quot;&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; was not linked.&quot;);</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    }</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! This is the main method that gets called every time the module is updated.  &#39;</span> \
                   <span class="s1">&#39;Provide an appropriate description.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    @return void</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;void &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">+</span> <span class="s1">&#39;::UpdateState(uint64_t CurrentSimNanos)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span> <span class="o">+</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer;  //!&lt; local copy of message buffer</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // always zero the output message buffers before assigning values</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer = this-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.zeroMsgPayload;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // read in the input messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer = this-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;();</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // do some math and stuff to populate the output messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // write to the output messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    this-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.write(&amp;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer, this-&gt;moduleID, CurrentSimNanos);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">defFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">defFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># make module swig interface file</span>
        <span class="c1">#</span>
        <span class="n">swigFileName</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.i&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Swig Interface File &quot;</span> <span class="o">+</span> <span class="n">swigFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">swigFile</span> <span class="o">=</span> <span class="n">licenseC</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%module &#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;    #include &quot;&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%pythoncode %{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;    from Basilisk.architecture.swig_common_model import *</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;std_string.i&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;swig_conly_data.i&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;sys_model.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">includedMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span> <span class="o">+</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="c1"># ensure we don&#39;t include message definition files multiple times</span>
            <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">includedMsgs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
                    <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;architecture/msgPayloadDefC/&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;struct &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C++&#39;</span><span class="p">:</span>
                    <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;architecture/msgPayloadDefCpp/&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">includedMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%pythoncode %{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;import sys</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;protectAllClasses(sys.modules[__name__])</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">swigFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">swigFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>

        <span class="c1"># make module definition file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createRstFile</span><span class="p">()</span>

        <span class="c1"># make module unit test file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createTestFile</span><span class="p">(</span><span class="s2">&quot;C++&quot;</span><span class="p">)</span>

        <span class="c1"># restore current working directory</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">initialCwd</span><span class="p">)</span></div>

<div class="viewcode-block" id="moduleGenerator.createCModule"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.moduleGenerator.createCModule">[docs]</a>    <span class="k">def</span> <span class="nf">createCModule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a C Basilisk module</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">modulePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modulePathRelSrc</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">moduleName</span>
        <span class="n">briefDescription</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">briefDescription</span>
        <span class="n">inMsgList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inMsgList</span>
        <span class="n">outMsgList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outMsgList</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Creating C Module: &quot;</span> <span class="o">+</span> <span class="n">endColor</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_className</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;([a-zA-Z])&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">groups</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># read in the license information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">readLicense</span><span class="p">()</span>
        <span class="n">licenseC</span> <span class="o">=</span> <span class="s2">&quot;/*&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_licenseText</span> <span class="o">+</span> <span class="s2">&quot;*/</span><span class="se">\n\n</span><span class="s2">&quot;</span>

        <span class="c1"># make sure the path, specified relative to basilisk/src, to the new module location is correct</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathToSrc</span><span class="p">,</span> <span class="n">modulePath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkPathToNewFolderLocation</span><span class="p">()</span>

        <span class="c1"># create new Module folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_newModuleLocation</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_absPath</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createNewModuleFolder</span><span class="p">()</span>

        <span class="c1">#</span>
        <span class="c1"># make module header file</span>
        <span class="c1">#</span>
        <span class="n">headerFileName</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Header File &quot;</span> <span class="o">+</span> <span class="n">headerFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">headerFile</span> <span class="o">=</span> <span class="n">licenseC</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#ifndef &#39;</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;_H</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#define &#39;</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;_H</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &lt;stdint.h&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1"># loop over message definition includes</span>
        <span class="n">includedMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span> <span class="o">+</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="c1"># ensure we don&#39;t include message definition files multiple times</span>
            <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">includedMsgs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
                    <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;cMsgCInterface/&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C++&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">failColor</span> <span class="o">+</span> <span class="s2">&quot;Error: &quot;</span> <span class="o">+</span> <span class="n">endColor</span> <span class="o">+</span> <span class="s2">&quot;You can&#39;t include C++ messages in a C module.&quot;</span><span class="p">)</span>
                    <span class="n">exit</span><span class="p">()</span>
                <span class="n">includedMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;architecture/utilities/bskLogging.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! @brief &#39;</span> <span class="o">+</span> <span class="n">briefDescription</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> */</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;typedef struct {</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    /* declare module IO interfaces */</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> \
                          <span class="o">+</span> <span class="s1">&#39;;  //!&lt; &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> \
                          <span class="o">+</span> <span class="s1">&#39;;  //!&lt; &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;desc&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    BSKLogger *bskLogger;  //!&lt; BSK Logging</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;}&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;Config;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#ifdef __cplusplus</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;extern &quot;C&quot; {</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#endif</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    void SelfInit_&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;Config *configData, int64_t moduleID);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    void Update_&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;Config *configData, uint64_t callTime, int64_t moduleID);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;    void Reset_&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;Config *configData, uint64_t callTime, int64_t moduleID);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#ifdef __cplusplus</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#endif</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">headerFile</span> <span class="o">+=</span> <span class="s1">&#39;#endif</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">headerFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">headerFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># make module definition file</span>
        <span class="c1">#</span>
        <span class="n">defFileName</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.c&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Definition File &quot;</span> <span class="o">+</span> <span class="n">defFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">defFile</span> <span class="o">=</span> <span class="n">licenseC</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;&#39;</span> <span class="o">+</span> <span class="n">modulePath</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;#include &quot;string.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;/*!</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    This method initializes the output messages for this module.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @return void</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param configData The configuration data associated with this module</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param moduleID The module identifier</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; */</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;void SelfInit_&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;Config  *configData, int64_t moduleID)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C_init(&amp;configData-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! This method performs a complete reset of the module.  Local module variables that retain</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    time varying states between function calls are reset to their default values.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    Check if required input messages are connected.</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @return void</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param configData The configuration data associated with the module</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param callTime [ns] time the method is called</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param moduleID The module identifier</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;void Reset_&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;Config *configData, uint64_t callTime, int64_t moduleID)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // check if the required message has not been connected</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    if (!&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C_isLinked(&amp;configData-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)) {</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;        _bskLog(configData-&gt;bskLogger, BSK_ERROR, &quot;Error: &#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> \
                       <span class="o">+</span> <span class="s1">&#39; was not connected.&quot;);</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    }</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;/*! Add a description of what this main Update() routine does for this module</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @return void</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param configData The configuration data associated with the module</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param callTime The clock time at which the function was called (nanoseconds)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39; @param moduleID The module identifier</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;void Update_&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;Config *configData, uint64_t callTime, int64_t moduleID)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span> <span class="o">+</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer;  //!&lt; local copy of message buffer</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // always zero the output message buffers before assigning values</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer = &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C_zeroMsgPayload();</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // read in the input messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer = &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C_read(&amp;configData-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // do some math and stuff to populate the output messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    // write to the output messages</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C_write(&amp;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Buffer, &amp;configData-&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span>
                <span class="s1">&#39;var&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, moduleID, callTime);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">defFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>


        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">defFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">defFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># make module swig interface file</span>
        <span class="c1">#</span>
        <span class="n">swigFileName</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.i&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">statusColor</span> <span class="o">+</span> <span class="s2">&quot;Creating Swig Interface File &quot;</span> <span class="o">+</span> <span class="n">swigFileName</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">endColor</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">swigFile</span> <span class="o">=</span> <span class="n">licenseC</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%module &#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;    #include &quot;&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%pythoncode %{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;    from Basilisk.architecture.swig_common_model import *</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;swig_c_wrap.i&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;%c_wrap(</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">includedMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">inMsgList</span> <span class="o">+</span> <span class="n">outMsgList</span><span class="p">:</span>
            <span class="c1"># ensure we don&#39;t include message definition files multiple times</span>
            <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">includedMsgs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
                    <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1">nclude &quot;architecture/msgPayloadDefC/&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;Payload.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;struct &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_C;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;wrap&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C++&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">failColor</span> <span class="o">+</span> <span class="s2">&quot;ERROR: &quot;</span> <span class="o">+</span> <span class="n">endColor</span> <span class="o">+</span> <span class="s1">&#39;you cannot swig a C++ message in a C module.&#39;</span><span class="p">)</span>
                <span class="n">includedMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%pythoncode %{</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;import sys</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;protectAllClasses(sys.modules[__name__])</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;%}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">swigFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">swigFileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">swigFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>

        <span class="c1"># make module definition file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createRstFile</span><span class="p">()</span>

        <span class="c1"># make module unit test file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createTestFile</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">initialCwd</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="fillCppInfo"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.fillCppInfo">[docs]</a><span class="k">def</span> <span class="nf">fillCppInfo</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fill in the C++ module information.  This should be edited before running to meet the new module needs.&quot;&quot;&quot;</span>
    <span class="c1"># define the path where the Basilisk module folder will be</span>
    <span class="n">module</span><span class="o">.</span><span class="n">modulePathRelSrc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;moduleTemplates&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="c1"># define module name and brief description</span>
    <span class="n">module</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">=</span> <span class="s2">&quot;autoCppModule&quot;</span>        <span class="c1"># should be lower camel case</span>
    <span class="n">module</span><span class="o">.</span><span class="n">briefDescription</span> <span class="o">=</span> <span class="s2">&quot;This is an auto-created sample C++ module.  The description is included with &quot;</span> \
        <span class="s2">&quot;the module class definition&quot;</span>
    <span class="n">module</span><span class="o">.</span><span class="n">copyrightHolder</span> <span class="o">=</span> <span class="s2">&quot;Autonomous Vehicle Systems Lab, University of Colorado Boulder&quot;</span>

    <span class="c1"># provide list of input messages</span>
    <span class="c1"># leave list empty if there are no input messages</span>
    <span class="n">inMsgList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">inMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;AttRefMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;someInMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;input msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">inMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;AttRefMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;some2InMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;input msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">inMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;CSSConfigMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;anotherInMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;input msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">inMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;CSSConfigLogMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;anotherCppInMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;input msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C++&#39;</span><span class="p">})</span>
    <span class="n">module</span><span class="o">.</span><span class="n">inMsgList</span> <span class="o">=</span> <span class="n">inMsgList</span>

    <span class="c1"># provide list of output messages</span>
    <span class="c1"># leave list empty if there are no input messages</span>
    <span class="n">outMsgList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">outMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;AttRefMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;some2OutMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;output msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">outMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;SCStatesMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;someOutMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;output msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">outMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;RWConfigMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;anotherCppOutMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;output msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C++&#39;</span><span class="p">})</span>
    <span class="n">module</span><span class="o">.</span><span class="n">outMsgList</span> <span class="o">=</span> <span class="n">outMsgList</span></div>


<div class="viewcode-block" id="fillCInfo"><a class="viewcode-back" href="../Documentation/utilities/makeDraftModule.html#makeDraftModule.fillCInfo">[docs]</a><span class="k">def</span> <span class="nf">fillCInfo</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fill in the C module information.  This should be edited before running to meet the new module needs.&quot;&quot;&quot;</span>
    <span class="c1"># define the path where the Basilisk module folder will be</span>
    <span class="n">module</span><span class="o">.</span><span class="n">modulePathRelSrc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;moduleTemplates&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="c1"># define module name and brief description</span>
    <span class="n">module</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">=</span> <span class="s2">&quot;autoCModule&quot;</span>        <span class="c1"># should be lower camel case</span>
    <span class="n">module</span><span class="o">.</span><span class="n">briefDescription</span> <span class="o">=</span> <span class="s2">&quot;This is an auto-created sample C module.  The description is included with &quot;</span> \
        <span class="s2">&quot;the module class definition&quot;</span>
    <span class="n">module</span><span class="o">.</span><span class="n">copyrightHolder</span> <span class="o">=</span> <span class="s2">&quot;Autonomous Vehicle Systems Lab, University of Colorado Boulder&quot;</span>

    <span class="c1"># provide list of input messages</span>
    <span class="c1"># leave list empty if there are no input messages</span>
    <span class="n">inMsgList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">inMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;AttRefMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;someInMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;input msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">inMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;AttRefMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;some2InMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;input msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">inMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;CSSConfigMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;anotherInMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;input msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">module</span><span class="o">.</span><span class="n">inMsgList</span> <span class="o">=</span> <span class="n">inMsgList</span>

    <span class="c1"># provide list of output messages</span>
    <span class="c1"># leave list empty if there are no input messages</span>
    <span class="n">outMsgList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">outMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;AttRefMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;some2OutMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;output msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">outMsgList</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;SCStatesMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">:</span> <span class="s1">&#39;someOutMsg&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">:</span> <span class="s1">&#39;output msg description&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">:</span> <span class="s1">&#39;C&#39;</span><span class="p">})</span>
    <span class="n">module</span><span class="o">.</span><span class="n">outMsgList</span> <span class="o">=</span> <span class="n">outMsgList</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">makeModule</span> <span class="o">=</span> <span class="n">moduleGenerator</span><span class="p">()</span>

    <span class="n">fillCppInfo</span><span class="p">(</span><span class="n">makeModule</span><span class="p">)</span>
    <span class="n">makeModule</span><span class="o">.</span><span class="n">createCppModule</span><span class="p">()</span>

    <span class="n">fillCInfo</span><span class="p">(</span><span class="n">makeModule</span><span class="p">)</span>
    <span class="n">makeModule</span><span class="o">.</span><span class="n">createCModule</span><span class="p">()</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Autonomous Vehicle Systems (AVS) Laboratory.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>