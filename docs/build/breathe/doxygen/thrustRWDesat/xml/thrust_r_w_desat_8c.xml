<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="thrust_r_w_desat_8c" kind="file" language="C++">
    <compoundname>thrustRWDesat.c</compoundname>
    <includes refid="thrust_r_w_desat_8h" local="yes">fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.h</includes>
    <includes local="yes">architecture/utilities/linearAlgebra.h</includes>
    <includes local="yes">architecture/utilities/rigidBodyKinematics.h</includes>
    <includes local="yes">architecture/utilities/macroDefinitions.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">math.h</includes>
    <incdepgraph>
      <node id="1">
        <label>/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c</label>
        <link refid="thrust_r_w_desat_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.h</label>
        <link refid="thrust_r_w_desat_8h_source"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>architecture/utilities/bskLogging.h</label>
      </node>
      <node id="11">
        <label>architecture/utilities/linearAlgebra.h</label>
      </node>
      <node id="13">
        <label>architecture/utilities/macroDefinitions.h</label>
      </node>
      <node id="12">
        <label>architecture/utilities/rigidBodyKinematics.h</label>
      </node>
      <node id="5">
        <label>cMsgCInterface/RWConstellationMsg_C.h</label>
      </node>
      <node id="7">
        <label>cMsgCInterface/RWSpeedMsg_C.h</label>
      </node>
      <node id="4">
        <label>cMsgCInterface/THRArrayConfigMsg_C.h</label>
      </node>
      <node id="6">
        <label>cMsgCInterface/THRArrayOnTimeCmdMsg_C.h</label>
      </node>
      <node id="3">
        <label>cMsgCInterface/VehicleConfigMsg_C.h</label>
      </node>
      <node id="15">
        <label>math.h</label>
      </node>
      <node id="9">
        <label>stdint.h</label>
      </node>
      <node id="10">
        <label>stdlib.h</label>
      </node>
      <node id="14">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <sectiondef kind="func">
      <memberdef kind="function" id="thrust_r_w_desat_8c_1ac7405b91e9668da6a49ebe77bef8ed00" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void SelfInit_thrustRWDesat</definition>
        <argsstring>(thrustRWDesatConfig *configData, int64_t moduleID)</argsstring>
        <name>SelfInit_thrustRWDesat</name>
        <param>
          <type><ref refid="structthrust_r_w_desat_config" kindref="compound">thrustRWDesatConfig</ref> *</type>
          <declname>configData</declname>
        </param>
        <param>
          <type>int64_t</type>
          <declname>moduleID</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This method initializes the configData for the thruster-based RW desat module. It checks to ensure that the inputs are sane and then creates the output message <simplesect kind="return"><para>void </para>
</simplesect>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>configData</parametername>
</parameternamelist>
<parameterdescription>
<para>The configuration data associated with the thruster desat </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>moduleID</parametername>
</parameternamelist>
<parameterdescription>
<para>The module ID associated with configData </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c" line="34" column="6" bodyfile="/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c" bodystart="34" bodyend="37"/>
      </memberdef>
      <memberdef kind="function" id="thrust_r_w_desat_8c_1ab50b0d2b157df4e0a0d679dffe77e51a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void Reset_thrustRWDesat</definition>
        <argsstring>(thrustRWDesatConfig *configData, uint64_t callTime, int64_t moduleID)</argsstring>
        <name>Reset_thrustRWDesat</name>
        <param>
          <type><ref refid="structthrust_r_w_desat_config" kindref="compound">thrustRWDesatConfig</ref> *</type>
          <declname>configData</declname>
        </param>
        <param>
          <type>uint64_t</type>
          <declname>callTime</declname>
        </param>
        <param>
          <type>int64_t</type>
          <declname>moduleID</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
<para><itemizedlist>
<listitem><para>Read input messages</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>Transform from structure S to body B frame</para>
</listitem></itemizedlist>
</para>
        </inbodydescription>
        <location file="/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c" line="40" column="6" bodyfile="/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c" bodystart="40" bodyend="89"/>
      </memberdef>
      <memberdef kind="function" id="thrust_r_w_desat_8c_1a23ab214ede8bb42f65510d832be44202" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void Update_thrustRWDesat</definition>
        <argsstring>(thrustRWDesatConfig *configData, uint64_t callTime, int64_t moduleID)</argsstring>
        <name>Update_thrustRWDesat</name>
        <param>
          <type><ref refid="structthrust_r_w_desat_config" kindref="compound">thrustRWDesatConfig</ref> *</type>
          <declname>configData</declname>
        </param>
        <param>
          <type>uint64_t</type>
          <declname>callTime</declname>
        </param>
        <param>
          <type>int64_t</type>
          <declname>moduleID</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>This method takes in the current oberved reaction wheel angular velocities. <simplesect kind="return"><para>void </para>
</simplesect>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>configData</parametername>
</parameternamelist>
<parameterdescription>
<para>The configuration data associated with the RW desat logic </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>callTime</parametername>
</parameternamelist>
<parameterdescription>
<para>The clock time at which the function was called (nanoseconds) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>moduleID</parametername>
</parameternamelist>
<parameterdescription>
<para>The ID associated with the configData </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
<para><itemizedlist>
<listitem><para>If we haven&apos;t met the cooldown threshold, do nothing</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>Read the input rwheel speeds from the reaction wheels</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>Accumulate the total momentum vector we want to apply (subtract speed vectors)</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>If we are within the specified threshold for the momentum, stop desaturation.</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>Iterate through the list of thrusters and find the &quot;best&quot; match for the observed momentum vector that does not continue to perturb the velocity in the same direction as previous aggregate firings. Only do this once we have removed the specified momentum accuracy from the current direction.</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>Zero out the thruster commands prior to setting the selected thruster. Only apply thruster firing if the best match is non-zero. Find the thruster that best matches the current specified direction.</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>If we have a valid match:<itemizedlist>
<listitem><para>Set firing based on the best counter to the observed momentum.</para>
</listitem><listitem><para>Saturate based on the maximum allowable firing</para>
</listitem><listitem><para>Accumulate impulse and the total firing</para>
</listitem><listitem><para>Set the previous call time value for cooldown check</para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
<para><itemizedlist>
<listitem><para>Write the output message to the thruster system</para>
</listitem></itemizedlist>
</para>
        </inbodydescription>
        <location file="/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c" line="97" column="6" bodyfile="/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c" bodystart="97" bodyend="207"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>ISC<sp/>License</highlight></codeline>
<codeline lineno="3"><highlight class="comment"></highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>Copyright<sp/>(c)<sp/>2016,<sp/>Autonomous<sp/>Vehicle<sp/>Systems<sp/>Lab,<sp/>University<sp/>of<sp/>Colorado<sp/>at<sp/>Boulder</highlight></codeline>
<codeline lineno="5"><highlight class="comment"></highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>Permission<sp/>to<sp/>use,<sp/>copy,<sp/>modify,<sp/>and/or<sp/>distribute<sp/>this<sp/>software<sp/>for<sp/>any</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>purpose<sp/>with<sp/>or<sp/>without<sp/>fee<sp/>is<sp/>hereby<sp/>granted,<sp/>provided<sp/>that<sp/>the<sp/>above</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>copyright<sp/>notice<sp/>and<sp/>this<sp/>permission<sp/>notice<sp/>appear<sp/>in<sp/>all<sp/>copies.</highlight></codeline>
<codeline lineno="9"><highlight class="comment"></highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>THE<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>&quot;AS<sp/>IS&quot;<sp/>AND<sp/>THE<sp/>AUTHOR<sp/>DISCLAIMS<sp/>ALL<sp/>WARRANTIES</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>WITH<sp/>REGARD<sp/>TO<sp/>THIS<sp/>SOFTWARE<sp/>INCLUDING<sp/>ALL<sp/>IMPLIED<sp/>WARRANTIES<sp/>OF</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>MERCHANTABILITY<sp/>AND<sp/>FITNESS.<sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>THE<sp/>AUTHOR<sp/>BE<sp/>LIABLE<sp/>FOR</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>ANY<sp/>SPECIAL,<sp/>DIRECT,<sp/>INDIRECT,<sp/>OR<sp/>CONSEQUENTIAL<sp/>DAMAGES<sp/>OR<sp/>ANY<sp/>DAMAGES</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>WHATSOEVER<sp/>RESULTING<sp/>FROM<sp/>LOSS<sp/>OF<sp/>USE,<sp/>DATA<sp/>OR<sp/>PROFITS,<sp/>WHETHER<sp/>IN<sp/>AN</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>ACTION<sp/>OF<sp/>CONTRACT,<sp/>NEGLIGENCE<sp/>OR<sp/>OTHER<sp/>TORTIOUS<sp/>ACTION,<sp/>ARISING<sp/>OUT<sp/>OF</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>OR<sp/>IN<sp/>CONNECTION<sp/>WITH<sp/>THE<sp/>USE<sp/>OR<sp/>PERFORMANCE<sp/>OF<sp/>THIS<sp/>SOFTWARE.</highlight></codeline>
<codeline lineno="17"><highlight class="comment"></highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;architecture/utilities/linearAlgebra.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;architecture/utilities/rigidBodyKinematics.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;architecture/utilities/macroDefinitions.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>SelfInit_thrustRWDesat(<ref refid="structthrust_r_w_desat_config" kindref="compound">thrustRWDesatConfig</ref><sp/>*configData,<sp/>int64_t<sp/>moduleID)</highlight></codeline>
<codeline lineno="35"><highlight class="normal">{</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>THRArrayOnTimeCmdMsg_C_init(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1ae604d812e771d0f27d1b5f6e9b01bf08" kindref="member">thrCmdOutMsg</ref>);</highlight></codeline>
<codeline lineno="37"><highlight class="normal">}</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Reset_thrustRWDesat(<ref refid="structthrust_r_w_desat_config" kindref="compound">thrustRWDesatConfig</ref><sp/>*configData,<sp/>uint64_t<sp/>callTime,<sp/>int64_t<sp/>moduleID)</highlight></codeline>
<codeline lineno="41"><highlight class="normal">{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>RWConstellationMsgPayload<sp/>localRWData;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/>THRArrayConfigMsgPayload<sp/>localThrustData;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>VehicleConfigMsgPayload<sp/>localConfigData;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>momentArm[3];</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>thrustDat_B[3];</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>the<sp/>required<sp/>input<sp/>messages<sp/>are<sp/>included</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!RWConstellationMsg_C_isLinked(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1aad2655ac5d0f7f12646003591a0dcb33" kindref="member">rwConfigInMsg</ref>))<sp/>{</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_bskLog(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a47930f8758de9066a21df14f75741057" kindref="member">bskLogger</ref>,<sp/>BSK_ERROR,<sp/></highlight><highlight class="stringliteral">&quot;Error:<sp/>thrustRWDesat.rwConfigInMsg<sp/>wasn&apos;t<sp/>connected.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!VehicleConfigMsg_C_isLinked(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1af3c129957164107d46f8afe8cce44c10" kindref="member">vecConfigInMsg</ref>))<sp/>{</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_bskLog(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a47930f8758de9066a21df14f75741057" kindref="member">bskLogger</ref>,<sp/>BSK_ERROR,<sp/></highlight><highlight class="stringliteral">&quot;Error:<sp/>thrustRWDesat.vecConfigInMsg<sp/>wasn&apos;t<sp/>connected.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!THRArrayConfigMsg_C_isLinked(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1a338fde11e7550dc524c37d82be847d48" kindref="member">thrConfigInMsg</ref>))<sp/>{</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_bskLog(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a47930f8758de9066a21df14f75741057" kindref="member">bskLogger</ref>,<sp/>BSK_ERROR,<sp/></highlight><highlight class="stringliteral">&quot;Error:<sp/>thrustRWDesat.thrConfigInMsg<sp/>wasn&apos;t<sp/>connected.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!RWSpeedMsg_C_isLinked(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1acd8baa911ad3157e8f9c20a758d6d8be" kindref="member">rwSpeedInMsg</ref>))<sp/>{</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_bskLog(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a47930f8758de9066a21df14f75741057" kindref="member">bskLogger</ref>,<sp/>BSK_ERROR,<sp/></highlight><highlight class="stringliteral">&quot;Error:<sp/>thrustRWDesat.rwSpeedInMsg<sp/>wasn&apos;t<sp/>connected.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>localRWData<sp/>=<sp/>RWConstellationMsg_C_read(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1aad2655ac5d0f7f12646003591a0dcb33" kindref="member">rwConfigInMsg</ref>);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>localConfigData<sp/>=<sp/>VehicleConfigMsg_C_read(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1af3c129957164107d46f8afe8cce44c10" kindref="member">vecConfigInMsg</ref>);</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>localThrustData<sp/>=<sp/>THRArrayConfigMsg_C_read(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1a338fde11e7550dc524c37d82be847d48" kindref="member">thrConfigInMsg</ref>);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a59087a944464e4a90f45458cc54b892f" kindref="member">numRWAs</ref><sp/>=<sp/>localRWData.numRW;</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;<sp/>i&lt;configData-&gt;<ref refid="structthrust_r_w_desat_config_1a59087a944464e4a90f45458cc54b892f" kindref="member">numRWAs</ref>;<sp/>i=i+1)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Copy(localRWData.reactionWheels[i].gsHat_B,<sp/>&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1a606ffc3e1c7f3d2e535eed5caebb9d75" kindref="member">rwAlignMap</ref>[i*3]);</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a052866a6f1136b508999ee2e3f72c41f" kindref="member">numThrusters</ref><sp/>=<sp/>localThrustData.numThrusters;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(i=0;<sp/>i&lt;configData-&gt;<ref refid="structthrust_r_w_desat_config_1a052866a6f1136b508999ee2e3f72c41f" kindref="member">numThrusters</ref>;<sp/>i=i+1)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Copy(localThrustData.thrusters[i].tHatThrust_B,<sp/>&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1a9f3033ed5f3bd42237fe3bc750696be3" kindref="member">thrAlignMap</ref>[i*3]);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Copy(localThrustData.thrusters[i].rThrust_B,<sp/>thrustDat_B);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Subtract(thrustDat_B,<sp/>localConfigData.CoM_B,<sp/>momentArm);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Copy(localThrustData.thrusters[i].tHatThrust_B,<sp/>thrustDat_B);</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Cross(momentArm,<sp/>thrustDat_B,<sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a07c6e20baf54552598aa197abcd61c94" kindref="member">thrTorqueMap</ref>[i*3]));</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1add9cefb6d7af7387d3b6179839bdba2f" kindref="member">previousFiring</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>v3SetZero(configData-&gt;<ref refid="structthrust_r_w_desat_config_1ac7ae5a39b1b962597ec255e2a03e26ee" kindref="member">accumulatedImp</ref>);</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1abacece28fa914c90963bc31bd8bb7d39" kindref="member">totalAccumFiring</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal">}</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Update_thrustRWDesat(<ref refid="structthrust_r_w_desat_config" kindref="compound">thrustRWDesatConfig</ref><sp/>*configData,<sp/>uint64_t<sp/>callTime,</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/>int64_t<sp/>moduleID)</highlight></codeline>
<codeline lineno="99"><highlight class="normal">{</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>i;</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>selectedThruster;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Thruster<sp/>index<sp/>to<sp/>fire<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>RWSpeedMsgPayload<sp/>rwSpeeds;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Local<sp/>reaction<sp/>wheel<sp/>speeds<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>observedSpeedVec[3];<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>total<sp/>summed<sp/>speed<sp/>of<sp/>RWAs*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>singleSpeedVec[3];<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>speed<sp/>vector<sp/>for<sp/>a<sp/>single<sp/>wheel*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>bestMatch;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>current<sp/>best<sp/>thruster/wheel<sp/>matching*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>currentMatch;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Assessment<sp/>of<sp/>the<sp/>current<sp/>match<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>fireValue;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Amount<sp/>of<sp/>time<sp/>to<sp/>fire<sp/>the<sp/>jet<sp/>for<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>THRArrayOnTimeCmdMsgPayload<sp/>outputData;<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Local<sp/>output<sp/>firings<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((callTime<sp/>-<sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1add9cefb6d7af7387d3b6179839bdba2f" kindref="member">previousFiring</ref>)*1.0E-9<sp/>&lt;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a97a9706bead3a1e39355c620e9537df7" kindref="member">thrFiringPeriod</ref>)</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/>rwSpeeds<sp/>=<sp/>RWSpeedMsg_C_read(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1acd8baa911ad3157e8f9c20a758d6d8be" kindref="member">rwSpeedInMsg</ref>);</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>v3SetZero(observedSpeedVec);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a59087a944464e4a90f45458cc54b892f" kindref="member">numRWAs</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Scale(rwSpeeds.wheelSpeeds[i],<sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a606ffc3e1c7f3d2e535eed5caebb9d75" kindref="member">rwAlignMap</ref>[i<sp/>*<sp/>3]),<sp/></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>singleSpeedVec);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Subtract(observedSpeedVec,<sp/>singleSpeedVec,<sp/>observedSpeedVec);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(v3Norm(observedSpeedVec)<sp/>&lt;<sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a4b65495caa9e37f2faf0eda17a743391" kindref="member">DMThresh</ref>)</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>selectedThruster<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/>bestMatch<sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(v3Dot(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a7035674818b949448c8f0ae7cf437e3d" kindref="member">currDMDir</ref>,<sp/>observedSpeedVec)<sp/>&lt;=<sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a4b65495caa9e37f2faf0eda17a743391" kindref="member">DMThresh</ref>)</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a052866a6f1136b508999ee2e3f72c41f" kindref="member">numThrusters</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fireValue<sp/>=<sp/>v3Dot(observedSpeedVec,</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a07c6e20baf54552598aa197abcd61c94" kindref="member">thrTorqueMap</ref>[i<sp/>*<sp/>3]));</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentMatch<sp/>=<sp/>v3Dot(configData-&gt;<ref refid="structthrust_r_w_desat_config_1ac7ae5a39b1b962597ec255e2a03e26ee" kindref="member">accumulatedImp</ref>,</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a9f3033ed5f3bd42237fe3bc750696be3" kindref="member">thrAlignMap</ref>[i<sp/>*<sp/>3]));</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fireValue<sp/>-<sp/>currentMatch<sp/>&gt;<sp/>bestMatch<sp/>&amp;&amp;<sp/>fireValue<sp/>&gt;<sp/>0.0)</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>selectedThruster<sp/>=<sp/>i;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bestMatch<sp/>=<sp/>fireValue<sp/>-<sp/>currentMatch;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(selectedThruster<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Normalize(&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1a07c6e20baf54552598aa197abcd61c94" kindref="member">thrTorqueMap</ref>[selectedThruster<sp/>*<sp/>3],</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a7035674818b949448c8f0ae7cf437e3d" kindref="member">currDMDir</ref>);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>outputData<sp/>=<sp/>THRArrayOnTimeCmdMsg_C_zeroMsgPayload();</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>selectedThruster<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>bestMatch<sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1a052866a6f1136b508999ee2e3f72c41f" kindref="member">numThrusters</ref>;<sp/>i++)</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fireValue<sp/>=<sp/>v3Dot(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a7035674818b949448c8f0ae7cf437e3d" kindref="member">currDMDir</ref>,</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a07c6e20baf54552598aa197abcd61c94" kindref="member">thrTorqueMap</ref>[i<sp/>*<sp/>3]));</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentMatch<sp/>=<sp/>v3Dot(configData-&gt;<ref refid="structthrust_r_w_desat_config_1ac7ae5a39b1b962597ec255e2a03e26ee" kindref="member">accumulatedImp</ref>,</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a9f3033ed5f3bd42237fe3bc750696be3" kindref="member">thrAlignMap</ref>[i<sp/>*<sp/>3]));</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fireValue<sp/>-<sp/>currentMatch<sp/>&gt;<sp/>bestMatch<sp/>&amp;&amp;<sp/>fireValue<sp/>&gt;<sp/>0.0)</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>selectedThruster<sp/>=<sp/>i;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bestMatch<sp/>=<sp/>fireValue<sp/>-<sp/>currentMatch;</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bestMatch<sp/>&gt;<sp/>0.0)</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputData.OnTimeRequest[selectedThruster]<sp/>=<sp/>v3Dot(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a7035674818b949448c8f0ae7cf437e3d" kindref="member">currDMDir</ref>,</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a07c6e20baf54552598aa197abcd61c94" kindref="member">thrTorqueMap</ref>[selectedThruster<sp/>*<sp/>3]));</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputData.OnTimeRequest[selectedThruster]<sp/>=</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outputData.OnTimeRequest[selectedThruster]<sp/>&gt;<sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1ac12c19e341b214e030dfac9fff219def" kindref="member">maxFiring</ref><sp/>?</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1ac12c19e341b214e030dfac9fff219def" kindref="member">maxFiring</ref><sp/>:<sp/>outputData.OnTimeRequest[selectedThruster];</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1add9cefb6d7af7387d3b6179839bdba2f" kindref="member">previousFiring</ref><sp/>=<sp/>callTime;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1abacece28fa914c90963bc31bd8bb7d39" kindref="member">totalAccumFiring</ref><sp/>+=<sp/>outputData.OnTimeRequest[selectedThruster];</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Scale(outputData.OnTimeRequest[selectedThruster],</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;(configData-&gt;<ref refid="structthrust_r_w_desat_config_1a9f3033ed5f3bd42237fe3bc750696be3" kindref="member">thrAlignMap</ref>[selectedThruster<sp/>*<sp/>3]),<sp/>singleSpeedVec);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v3Add(configData-&gt;<ref refid="structthrust_r_w_desat_config_1ac7ae5a39b1b962597ec255e2a03e26ee" kindref="member">accumulatedImp</ref>,<sp/>singleSpeedVec,</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>configData-&gt;<ref refid="structthrust_r_w_desat_config_1ac7ae5a39b1b962597ec255e2a03e26ee" kindref="member">accumulatedImp</ref>);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>THRArrayOnTimeCmdMsg_C_write(&amp;outputData,<sp/>&amp;configData-&gt;<ref refid="structthrust_r_w_desat_config_1ae604d812e771d0f27d1b5f6e9b01bf08" kindref="member">thrCmdOutMsg</ref>,<sp/>moduleID,<sp/>callTime);</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="207"><highlight class="normal">}</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/Users/julio/Desktop/basilisk/src/fswAlgorithms/effectorInterfaces/thrustRWDesat/thrustRWDesat.c"/>
  </compounddef>
</doxygen>
